## 问题分析

从截图和日志可以看出当前布局存在以下问题：

1. **第一次 arrange**：正常节点（1w5gj6f0 和 23n193mr）被推到很右边（x=1720 和 x=2226），而浮动节点保持在 x=1106 和 x=1120
2. **第二次 arrange**：虚拟父节点创建后，布局仍然不协调

## 根本原因

1. `calculateLevelX` 函数让浮动节点影响了正常节点的层级 X 坐标
2. 虚拟父节点的引入增加了布局复杂度
3. 节点间距过大，布局不够紧凑

## 改进方案

### 1. 简化层级计算（高优先级）
- 修改 `calculateLevelX`，让浮动节点不参与层级 X 坐标计算
- 正常节点按自己的层级布局，不考虑浮动节点的 X 位置
- 只在 Y 方向上避免与浮动节点重叠

### 2. 优化 Y 方向避让（高优先级）
- 简化 `findNonOverlappingY`，只在 Y 方向检测重叠
- 减少避让距离，让布局更紧凑
- 添加调试日志，帮助诊断问题

### 3. 重新考虑浮动父节点的子节点布局（中优先级）
- 移除虚拟父节点机制
- 浮动父节点的子节点直接在浮动父节点右侧布局
- 子节点的 Y 坐标可以灵活调整

### 4. 减少间距（中优先级）
- 减小水平间距和垂直间距
- 让布局更紧凑美观

## 实施步骤

1. 修改 `calculateLevelX`，排除浮动节点
2. 简化 `findNonOverlappingY`
3. 移除虚拟父节点相关代码
4. 调整间距参数
5. 测试验证

请确认这个方案后，我将开始实施具体的代码修改。